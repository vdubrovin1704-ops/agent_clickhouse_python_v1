# CSV Analysis Agent API v2.0 - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.0

- ‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–æ–ª–±—Ü—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É–º–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ **–í–æ–∑–≤—Ä–∞—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ CSV** - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ base64
- ‚úÖ **–£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å (Claude Sonnet 4.5)

---

## Base URL

```
Production: https://your-domain.com
Development: http://localhost:8000
```

---

## Endpoints

### 1. Health Check

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API.

**Endpoint:** `GET /health`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "healthy",
  "model": "Claude Sonnet 4.5",
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

---

### 2. API Info

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö.

**Endpoint:** `GET /api/info`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "service": "CSV Analysis Agent API",
  "version": "2.0.0",
  "model": "Claude Sonnet 4.5",
  "features": [
    "–ê–Ω–∞–ª–∏–∑ CSV –¥–∞–Ω–Ω—ã—Ö",
    "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∏ –∫–æ–ª–æ–Ω–æ–∫)",
    "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö",
    "–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π",
    "–í–æ–∑–≤—Ä–∞—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ CSV —Ñ–∞–π–ª–∞"
  ],
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

---

### 3. –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CSV (–æ—Å–Ω–æ–≤–Ω–æ–π endpoint)

**Endpoint:** `POST /api/analyze`

**Content-Type:** `multipart/form-data`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| file | File | –î–∞ | CSV —Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ |
| query | string | –ù–µ—Ç | –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. **–ï—Å–ª–∏ –ø—É—Å—Ç–æ–π - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** |
| chat_history | string (JSON) | –ù–µ—Ç | –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ |

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:

**1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (query –ø—É—Å—Ç–æ–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç):**
```bash
curl -X POST "http://localhost:8000/api/analyze" \
  -F "file=@data.csv"
```

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∞–≥–µ–Ω—Ç:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
- –£–¥–∞–ª—è–µ—Ç –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–ª–æ–Ω–∫–∏
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –ü—Ä–∏–≤–æ–¥–∏—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É

**2. –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö (query —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å):**
```bash
curl -X POST "http://localhost:8000/api/analyze" \
  -F "file=@data.csv" \
  -F "query=–ü–æ–∫–∞–∂–∏ —Ç–æ–ø-10 –ø—Ä–æ–¥–∞–∂ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º"
```

**3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```bash
curl -X POST "http://localhost:8000/api/analyze" \
  -F "file=@data.csv" \
  -F "query=–£–¥–∞–ª–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ Sales < 1000"
```

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- `"–£–¥–∞–ª–∏ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ Country = 'Russia'"`
- `"–î–æ–±–∞–≤—å –∫–æ–ª–æ–Ω–∫—É Profit = Revenue - Cost"`
- `"–£–¥–∞–ª–∏ –∫–æ–ª–æ–Ω–∫—É Notes"`
- `"–ü–µ—Ä–µ–∏–º–µ–Ω—É–π –∫–æ–ª–æ–Ω–∫—É 'Amt' –≤ 'Amount'"`
- `"–û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π –ø–æ –¥–∞—Ç–µ –ø–æ —É–±—ã–≤–∞–Ω–∏—é"`
- `"–û—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 100 —Å—Ç—Ä–æ–∫"`

---

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞):

```json
{
  "success": true,
  "query": "[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞]",
  "text_output": "## üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö\n\n### üìä –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n- **–§–∞–π–ª:** sales.csv\n- **–†–∞–∑–º–µ—Ä:** 1002 —Å—Ç—Ä–æ–∫ √ó 13 –∫–æ–ª–æ–Ω–æ–∫\n\n### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏ –æ—á–∏—Å—Ç–∫–∏\n- üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ 2 –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫–∏ –≤ –Ω–∞—á–∞–ª–µ\n- üéØ –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏\n- üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ 1 –ø—É—Å—Ç—ã—Ö –∫–æ–ª–æ–Ω–æ–∫\n\n### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç\n- **–†–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:** 1000 —Å—Ç—Ä–æ–∫ √ó 12 –∫–æ–ª–æ–Ω–æ–∫\n...",
  "plots": [],
  "modified_csv": "Q291bnRyeSxJdGVtIFR5cGUsU2FsZXMgQ2hhbm5lbC4uLg==",
  "was_modified": true,
  "cleaning_steps": [
    "üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ 2 –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫–∏ –≤ –Ω–∞—á–∞–ª–µ",
    "üéØ –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏",
    "üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ 1 –ø—É—Å—Ç—ã—Ö –∫–æ–ª–æ–Ω–æ–∫"
  ],
  "file_info": {
    "filename": "sales.csv",
    "size_bytes": 45678,
    "rows": 1000,
    "columns": 12
  },
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–∞–Ω–∞–ª–∏–∑):

```json
{
  "success": true,
  "query": "–ü–æ–∫–∞–∂–∏ —Ç–æ–ø-5 —Å—Ç—Ä–∞–Ω –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º",
  "final_code": "# –ö–æ–¥ –∞–Ω–∞–ª–∏–∑–∞...",
  "text_output": "üîç –®–ê–ì 1: –ò–∑—É—á–∞—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö...\n–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: 1000 —Å—Ç—Ä–æ–∫, 12 –∫–æ–ª–æ–Ω–æ–∫\n...",
  "result_data": "## üìä –¢–æ–ø-5 —Å—Ç—Ä–∞–Ω –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º\n\n| Country | Total Sales |\n|---------|-------------|\n| USA | 1,234,567 |\n...",
  "plots": [
    "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgA..."
  ],
  "modified_csv": null,
  "was_modified": false,
  "file_info": {
    "filename": "sales.csv",
    "size_bytes": 45678,
    "rows": 1000,
    "columns": 12
  },
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):

```json
{
  "success": true,
  "query": "–£–¥–∞–ª–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ Sales < 100",
  "final_code": "# –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...",
  "text_output": "üîç –®–ê–ì 1: –ò–∑—É—á–∞—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö...\n...\n‚úÖ –£–¥–∞–ª–µ–Ω–æ 150 —Å—Ç—Ä–æ–∫ —Å Sales < 100",
  "result_data": "## ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã\n\n–£–¥–∞–ª–µ–Ω–æ 150 —Å—Ç—Ä–æ–∫...",
  "plots": [],
  "modified_csv": "Q291bnRyeSxJdGVtIFR5cGUsU2FsZXMgQ2hhbm5lbC4uLg==",
  "was_modified": true,
  "file_info": {
    "filename": "sales.csv",
    "size_bytes": 45678,
    "rows": 850,
    "columns": 12
  },
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

---

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π endpoint)

**Endpoint:** `POST /api/auto-clean`

–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω `/api/analyze` —Å –ø—É—Å—Ç—ã–º query. –£–¥–æ–±–µ–Ω –¥–ª—è —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| file | File | –î–∞ | CSV —Ñ–∞–π–ª |

```bash
curl -X POST "http://localhost:8000/api/auto-clean" \
  -F "file=@messy_data.csv"
```

---

### 5. –ü–æ–ª—É—á–∏—Ç—å —Å—Ö–µ–º—É CSV

**Endpoint:** `POST /api/schema`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| file | File | –î–∞ | CSV —Ñ–∞–π–ª |

```bash
curl -X POST "http://localhost:8000/api/schema" \
  -F "file=@data.csv"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "schema": {
    "columns": ["Country", "Product", "Sales", "Date"],
    "dtypes": {
      "Country": "object",
      "Product": "object",
      "Sales": "float64",
      "Date": "datetime64[ns]"
    },
    "shape": {"rows": 1000, "columns": 4},
    "missing_values": {
      "Country": 0,
      "Product": 5,
      "Sales": 12,
      "Date": 0
    },
    "sample_data": [
      {"Country": "USA", "Product": "Widget", "Sales": 1234.5, "Date": "2024-01-01"},
      ...
    ]
  },
  "filename": "data.csv",
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

---

### 6. –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ (–±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏)

**Endpoint:** `POST /api/quick-analyze`

–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π endpoint –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| file | File | –î–∞ | CSV —Ñ–∞–π–ª |
| query | string | –î–∞ | –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

```bash
curl -X POST "http://localhost:8000/api/quick-analyze" \
  -F "file=@data.csv" \
  -F "query=–ü–æ—Å—Ç—Ä–æ–π –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–¥–∞–∂ –ø–æ –º–µ—Å—è—Ü–∞–º"
```

---

## –†–∞–±–æ—Ç–∞ —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º CSV

–ö–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, –≤ –æ—Ç–≤–µ—Ç–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç:
- `was_modified: true` - —Ñ–ª–∞–≥ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω—ã
- `modified_csv` - –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π CSV –≤ base64

### –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ CSV –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:

```javascript
// JavaScript
function downloadModifiedCSV(response) {
  if (response.was_modified && response.modified_csv) {
    const csvBytes = atob(response.modified_csv);
    const blob = new Blob([csvBytes], { type: 'text/csv;charset=utf-8' });
    
    // –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'modified_' + response.file_info.filename;
    a.click();
    URL.revokeObjectURL(url);
  }
}
```

```python
# Python
import base64

def save_modified_csv(response, filename):
    if response.get('was_modified') and response.get('modified_csv'):
        csv_bytes = base64.b64decode(response['modified_csv'])
        with open(filename, 'wb') as f:
            f.write(csv_bytes)
```

---

## –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö:
- "–ü–æ–∫–∞–∂–∏ –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"
- "–°–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–ª–æ–Ω–∫–µ Country?"
- "–ö–∞–∫–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º?"
- "–ù–∞–π–¥–∏ –∞–Ω–æ–º–∞–ª–∏–∏ –≤ –¥–∞–Ω–Ω—ã—Ö"

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
- "–ü–æ—Å—Ç—Ä–æ–π –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–¥–∞–∂ –ø–æ –º–µ—Å—è—Ü–∞–º"
- "–ü–æ–∫–∞–∂–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–æ–π"
- "–°–¥–µ–ª–∞–π pie chart –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
- "–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π"

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- "–£–¥–∞–ª–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ Price = 0"
- "–£–¥–∞–ª–∏ –∫–æ–ª–æ–Ω–∫—É Notes"
- "–î–æ–±–∞–≤—å –∫–æ–ª–æ–Ω–∫—É Profit = Revenue - Cost"
- "–ü–µ—Ä–µ–∏–º–µ–Ω—É–π Date –≤ OrderDate"
- "–û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π –ø–æ Amount –ø–æ —É–±—ã–≤–∞–Ω–∏—é"
- "–û—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏ –∑–∞ 2024 –≥–æ–¥"
- "–ó–∞–º–µ–Ω–∏ –≤—Å–µ NULL –≤ –∫–æ–ª–æ–Ω–∫–µ Status –Ω–∞ 'Unknown'"

### –û—á–∏—Å—Ç–∫–∞:
- "–£–¥–∞–ª–∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏"
- "–£–¥–∞–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã"
- "–ü—Ä–∏–≤–µ–¥–∏ –∫–æ–ª–æ–Ω–∫—É Price –∫ —á–∏—Å–ª–æ–≤–æ–º—É —Ç–∏–ø—É"
- "–£–±–µ—Ä–∏ –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–æ–ª–æ–Ω–æ–∫"

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 400 | –û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON) |
| 500 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

### –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏:
```json
{
  "error": "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞",
  "message": "Column 'Price' not found",
  "timestamp": "2024-01-01T12:00:00.000000"
}
```

---

## JavaScript/TypeScript –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```typescript
interface AnalyzeResponse {
  success: boolean;
  query: string;
  text_output: string;
  plots: string[];
  modified_csv: string | null;
  was_modified: boolean;
  file_info: {
    filename: string;
    rows: number;
    columns: number;
  };
  error?: string;
}

async function analyzeCSV(
  file: File, 
  query: string = ""
): Promise<AnalyzeResponse> {
  const formData = new FormData();
  formData.append('file', file);
  if (query) {
    formData.append('query', query);
  }

  const response = await fetch('http://localhost:8000/api/analyze', {
    method: 'POST',
    body: formData
  });

  return response.json();
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const file = document.querySelector('input[type="file"]').files[0];

// –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
const cleaned = await analyzeCSV(file);
console.log(cleaned.text_output);

// –ê–Ω–∞–ª–∏–∑
const analysis = await analyzeCSV(file, "–ü–æ–∫–∞–∂–∏ —Ç–æ–ø-10 –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º");
console.log(analysis.result_data);

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
const edited = await analyzeCSV(file, "–£–¥–∞–ª–∏ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ Sales < 100");
if (edited.was_modified) {
  downloadModifiedCSV(edited);
}
```

---

## Python –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```python
import requests
import base64

API_URL = "http://localhost:8000"

def analyze_csv(file_path: str, query: str = "") -> dict:
    with open(file_path, 'rb') as f:
        files = {'file': f}
        data = {'query': query} if query else {}
        response = requests.post(f"{API_URL}/api/analyze", files=files, data=data)
    return response.json()

# –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞
result = analyze_csv("messy_data.csv")
print(result['text_output'])

# –ê–Ω–∞–ª–∏–∑
result = analyze_csv("data.csv", "–ü–æ—Å—Ç—Ä–æ–π –≥—Ä–∞—Ñ–∏–∫ –ø–æ –≥–æ–¥–∞–º")
for plot in result['plots']:
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫
    img_data = base64.b64decode(plot.split(',')[1])
    with open('chart.png', 'wb') as f:
        f.write(img_data)

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
result = analyze_csv("data.csv", "–£–¥–∞–ª–∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏")
if result['was_modified']:
    csv_data = base64.b64decode(result['modified_csv'])
    with open('cleaned_data.csv', 'wb') as f:
        f.write(csv_data)
```
